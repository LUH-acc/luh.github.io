import{d as e,h as t,o as a,g as l,c as n,k as o,p as s,e as u,a as v,_ as r,i as c,F as d}from"./index-C_v8uZ0H.js";const i={class:"scratch-card"},h=(e=>(s("data-v-7c33d815"),e=e(),u(),e))((()=>v("canvas",{id:"scratch-canvas"},null,-1))),p=r(e({__name:"scratchCard",setup(e){const s=t(null),u=t(null);a((()=>{v()}));const v=()=>{var e;s.value=document.querySelector("#scratch-canvas"),u.value=s.value.getContext("2d"),s.value.width=300,s.value.height=200,u.value.fillStyle="#cccccc",u.value.globalAlpha=1,u.value.fillRect(0,0,s.value.width,s.value.height),null==(e=s.value)||e.addEventListener("touchstart",r,!1)},r=e=>{var t;e.preventDefault(),null==(t=s.value)||t.addEventListener("touchmove",c,!1),document.addEventListener("touchend",d,!1)},c=e=>{e.preventDefault();const t=e.touches[0],a=t.clientX-s.value.offsetLeft,l=t.clientY-s.value.offsetTop;p(a,l)},d=e=>{var t;e.preventDefault(),null==(t=s.value)||t.removeEventListener("touchmove",c),document.removeEventListener("touchend",d),f()},p=(e,t)=>{var a,l;u.value.beginPath(),u.value.fillStyle="#000000",u.value.globalCompositeOperation="destination-out",null==(a=u.value)||a.arc(e,t,10,0,2*Math.PI),null==(l=u.value)||l.fill()},f=()=>{var e;let t=u.value.getImageData(0,0,s.value.width,s.value.height),a=0,l=t.data.length/4;for(let n=0;n<t.data.length;n+=4)0==t.data[n+3]&&a++;a>=.7*l&&(null==(e=s.value)||e.remove())};return(e,t)=>(l(),n("div",i,[o(" 原图像 "),h]))}}),[["__scopeId","data-v-7c33d815"]]),f=e=>(s("data-v-3a4486d4"),e=e(),u(),e),m=f((()=>v("div",{class:"box"},null,-1))),g=f((()=>v("div",{class:"btn"},[v("svg",{class:"btn-svg",width:"15",height:"15",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M20 50 L40 70 L70 40",stroke:"#FFF","stroke-width":"5",fill:"none"})])],-1))),x=r(e({__name:"index",setup(e){const o=t(null);a((()=>{var e;o.value=document.querySelector(".box"),null==(e=o.value)||e.addEventListener("mousedown",(e=>{s(e)}))}));const s=e=>{let t=e.clientX-o.value.offsetLeft,a=e.clientY-o.value.offsetTop;u(t,a)},u=(e,t)=>{var a;const l=document.createDocumentFragment();for(let n=0;n<10;n++){const a=v(e,t);l.append(a)}null==(a=o.value)||a.appendChild(l)},v=(e,t)=>{const a=document.createElement("div");a.style.position="absolute",a.style.left=e+"px",a.style.top=t+"px",a.style.width="8px",a.style.height="8px",a.style.borderRadius="50%",a.style.background=r();let l=200*Math.random()-100,n=200*Math.random()-100;e+l>o.value.clientWidth&&(l=0),t+n>o.value.clientHeight&&(n=0);return a.animate([{opacity:1,transform:"translate(0)"},{opacity:.1,transform:`translate(${l}px,${n}px)`}],{duration:1e3,easing:"ease-out",fill:"forwards"}).onfinish=()=>{a.remove()},a},r=()=>"#"+Math.floor(16777215*Math.random()).toString(16);return(e,t)=>(l(),n(d,null,[c(p),m,g],64))}}),[["__scopeId","data-v-3a4486d4"]]);export{x as default};
